---
title: 回来继续写博客系统了
route: back-for-blog
description: 详细介绍个人博客网站的技术架构和实现方案
date: 2025/10/16 10:23:00
tags:
  - Vue
  - Vite
  - 前端架构
---

时隔两年, 我又捡起来写博客系统了, 希望这次不要半途而废。
记录一下这个博客用的技术栈~

## 🎯 技术架构概述

本博客采用现代化的前端技术栈构建，主要特点包括：

- **静态站点生成**：基于 Vue 3 和 Vite 构建的单页应用
- **Markdown 驱动**：文章内容使用 Markdown 编写，支持代码高亮和数学公式
- **响应式设计**：适配各种设备尺寸，提供良好的移动端体验
- **性能优化**：代码分割、懒加载、资源压缩等优化措施
- **开发体验**：热重载、TypeScript 支持、ESLint 代码规范

## 🚀 核心技术栈

### 🖼️ 前端框架
- **Vue 3.5.22**：采用 Composition API 和响应式系统
- **Vue Router 4.5.1**：单页应用路由管理
- **Pinia 2.3.1**：状态管理库

### 🔧 构建工具
- **Vite 4.5.14**：现代化构建工具，提供快速的开发体验
- **TypeScript 4.9.5**：类型安全的 JavaScript 超集
- **ESLint**：代码质量和风格检查

### 🎨 样式方案
- **UnoCSS 0.51.13**：原子化 CSS 框架
- **Sass 1.93.2**：CSS 预处理器
- **响应式设计**：支持多种屏幕尺寸

### 📄 Markdown 处理
- **unplugin-vue-markdown 0.25.2**：Vue 组件中使用 Markdown
- **markdown-it 13.0.2**：Markdown 解析器
- **Shiki 3.13.0**：代码语法高亮
- **markdown-it-anchor**：自动生成标题锚点
- **markdown-it-table-of-contents**：自动生成目录

### 🧰 开发工具
- **Vitest**：单元测试框架
- **unplugin-auto-import**：自动导入 API
- **unplugin-vue-components**：自动导入组件
- **@vueuse/core**：Vue 组合式工具库

## 📁 项目结构

```
src/
├── components/          # 🧩 可复用组件
│   ├── Avatar.vue      # 👤 头像组件
│   ├── Nav.vue         # 🧭 导航组件
│   ├── Profile.vue     # 📋 个人信息组件
│   ├── Projects.vue    # 💼 项目展示组件
│   └── ...
├── pages/              # 📄 页面组件
│   ├── index.vue       # 🏠 首页
│   ├── posts.vue       # 📚 文章列表页
│   ├── posts/          # 📝 文章内容
│   └── about/          # ℹ️ 关于页面
├── composables/        # 🔧 组合式函数
│   ├── dark.ts         # 🌙 暗色模式
│   └── useMarkdown.ts  # 📄 Markdown 处理
├── styles/             # 🎨 样式文件
│   ├── main.css        # 🎯 主样式
│   ├── markdown.css    # 📝 Markdown 样式
│   └── code.scss       # 💻 代码高亮样式
├── utils/              # 🛠️ 工具函数
└── config/             # ⚙️ 配置文件
```

## ⚙️ 核心功能实现

### 1. 📝 Markdown 文章系统

使用 `unplugin-vue-markdown` 插件将 Markdown 文件转换为 Vue 组件：

```typescript
// vite.config.ts
Markdown({
  wrapperComponent: 'WrapperPost',
  wrapperClasses: 'prose m-auto slide-enter-content',
  headEnabled: true,
  exportFrontmatter: true,
  exposeFrontmatter: true,
  markdownItOptions: {
    quotes: '""\'\'',
  },
  // 配置 markdown-it 插件
  async markdownItSetup(md) {
    md.use(anchor, { slugify })
    md.use(LinkAttributes, { /* ... */ })
    md.use(TOC, { /* ... */ })
  }
})
```

### 2. 🛣️ 自动路由生成

使用 `vite-plugin-pages` 基于文件系统自动生成路由：

```typescript
Pages({
  extensions: ['vue', 'md'],
  extendRoute(route) {
    // 为 Markdown 文件提取 frontmatter 作为路由元信息
    if (path.endsWith('.md')) {
      const md = fs.readFileSync(path, 'utf-8')
      const { data } = matter(md)
      route.meta = Object.assign(route.meta || {}, { frontmatter: data })
    }
  }
})
```

### 3. 🌈 代码高亮

使用 Shiki 提供精确的语法高亮：

```typescript
const highlighter = await createHighlighter({
  themes: ['vitesse-dark', 'vitesse-light'],
  langs: Object.keys(bundledLanguages)
})
```

### 4. 🌙 暗色模式

基于 `@vueuse/core` 实现暗色模式切换：

```typescript
// composables/dark.ts
export const isDark = useDark()
export const toggleDark = useToggle(isDark)
```

## 🚀 构建和部署

### 💻 开发环境
```bash
pnpm dev  # 启动开发服务器 (端口 3333)
```

### 📦 生产构建
```bash
pnpm build     # 构建生产版本
pnpm preview   # 预览构建结果
```

### 🔍 代码质量
```bash
pnpm lint      # ESLint 检查
pnpm typecheck # TypeScript 类型检查
pnpm test      # 运行测试
```

### 🌐 部署配置

项目配置了 Netlify 部署，通过 `netlify.toml` 文件配置：

- 🔄 自动构建和部署
- 🛣️ 支持 SPA 路由
- 📈 资源优化和缓存

## ⚡ 性能优化

1. **📦 代码分割**：使用 Vite 的动态导入实现路由级代码分割
2. **🖼️ 资源优化**：图片懒加载、字体优化、CSS 压缩
3. **💾 缓存策略**：合理的缓存头设置
4. **⏰ 预加载**：关键资源预加载
5. **🌳 Tree Shaking**：移除未使用的代码

## 🛠️ 开发体验优化

1. **🔥 热重载**：Vite 提供毫秒级热更新
2. **🔄 自动导入**：API 和组件自动导入，减少样板代码
3. **🛡️ 类型安全**：全面的 TypeScript 支持
4. **📏 代码规范**：ESLint + Prettier 统一代码风格
5. **🪝 Git Hooks**：提交前自动检查代码质量

未来准备添加的功能：
- 🔍 搜索功能(WIP)
- 📡 RSS 订阅
- 🌍 国际化支持
- 📱 PWA 功能
